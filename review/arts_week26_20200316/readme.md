

极客时间--每日一课--如何有效解决代码的圈复杂度 

# 圈复杂度的定义

也称条件复杂度或循环复杂度，是一种软件度量，有老托马斯.J点.麦凯 在1976年提出，用来表示程序的复杂度，  
其符号为 VG 或是 M。 换句话说，就是度量代码中线性独立路径的个数  

| 圈复杂度 | 代码状况 | 可测性  | 维护成本 |
| ----- | ----- | ----- | ----- | 
| 1-10 | 清晰，结构化 | 高 | 低 | 
| 10-20 | 复杂 | 中 | 中 | 
| 20-30 | 非常复杂 | 低 | 高 | 
| \>30 | 不可读 | 不可测 | 非常高 | 

## 圈复杂度的计算

* 点边计算法：  V(G) = E- N + 2 (E--边的数量， N--节点数量)
* 节点计算法：  V(G) = P + 1 (P -- 逻辑分支语句：if while case等)  

## 降低圈复杂度的方法 

### 提炼函数
以异步消息的处理为例子 
### 卫语句
如果某个条件 A 及其罕见，就应该单独检查这个条件，并在条件A为真时，立刻返回
### 合并条件表达式
比如处理多个错误code的情况，将可以合并的错误码进行合并
### 以多态取代条件表达式
比如相似的业务使用多态来解决分支过多的情况，比如使用工厂模式等 
### 分解条件表达式
将判断逻辑语义化
### 替换算法
使用简明的算法
### 移除控制标记 
匹配到具体的不符合的直接return,减少循环  

## 降低圈复杂度的时机  

不要在不必要的时候太早的进行重构 
不要过度设计 

